{"remainingRequest":"C:\\workspace\\lottery\\lottery-customer-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\workspace\\lottery\\lottery-customer-app\\src\\components\\Lottery.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\workspace\\lottery\\lottery-customer-app\\src\\components\\Lottery.vue","mtime":1604386929759},{"path":"C:\\workspace\\lottery\\lottery-customer-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-customer-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-customer-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-customer-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZlZTogMCwKICAgICAgICAgICAgY3VycmVudDogbnVsbCwKICAgICAgICAgICAgdGltZXM6IDEsCiAgICAgICAgICAgIGN1c3RvbWVyOiB7ICJpZCI6ICIiLCAiZGVwb3NpdCI6IDAgfSwKICAgICAgICAgICAgbG90dGVyeVJvdW5kOiB7ImxvdHRlcnkiOiB7Im5hbWUiOiIifX0sCiAgICAgICAgICAgIG9wdGlvbnNCeUl0ZW1JZDogbmV3IE1hcCgpLAogICAgICAgICAgICBpdGVtQnlJdGVtSWQ6IG5ldyBNYXAoKSwKICAgICAgICAgICAgb3B0aW9uc1NlbGVjdGVkOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2VsZWN0T3B0aW9uOiBmdW5jdGlvbiAob3B0aW9uU2VsZWN0ZWQpIHsKICAgICAgICAgICAgbGV0IG9wdGlvbnNTZWxlY3RlZFRlbXAgPSBbLi4udGhpcy5vcHRpb25zU2VsZWN0ZWRdCiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG9wdGlvbnNTZWxlY3RlZFRlbXAuaW5kZXhPZihvcHRpb25TZWxlY3RlZCk7CiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA8IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbnNTZWxlY3RlZFRlbXAucHVzaChvcHRpb25TZWxlY3RlZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvcHRpb25zU2VsZWN0ZWRUZW1wLnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gY291bnQgb3B0aW9ucyBzZWxlY3RlZCBieSBpdGVtCiAgICAgICAgICAgIHZhciBvcHRpb25TZWxlY3RlZE51bUJ5SXRlbUlkID0gbmV3IE1hcCgpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnNTZWxlY3RlZFRlbXAubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zU2VsZWN0ZWRUZW1wW2ldOwogICAgICAgICAgICAgICAgdmFyIGl0ZW1JZCA9IG9wdGlvbi5pdGVtLmlkOwogICAgICAgICAgICAgICAgaWYgKCBvcHRpb25TZWxlY3RlZE51bUJ5SXRlbUlkLmhhcyhpdGVtSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uU2VsZWN0ZWROdW1CeUl0ZW1JZC5zZXQoaXRlbUlkLCBvcHRpb25TZWxlY3RlZE51bUJ5SXRlbUlkLmdldChpdGVtSWQpICsgMSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wdGlvblNlbGVjdGVkTnVtQnlJdGVtSWQuc2V0KGl0ZW1JZCwgMSApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zb2xlLmxvZygiIyMjMSAiICsgb3B0aW9uU2VsZWN0ZWROdW1CeUl0ZW1JZC5zaXplKQogICAgICAgICAgICBjb25zb2xlLmxvZygiIyMjMiAiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5sb3R0ZXJ5Um91bmQubG90dGVyeSkpCiAgICAgICAgICAgIC8vIGNvdW50IGZlZQogICAgICAgICAgICBpZiAob3B0aW9uU2VsZWN0ZWROdW1CeUl0ZW1JZC5zaXplID49IHRoaXMubG90dGVyeVJvdW5kLmxvdHRlcnkubWluSXRlbU51bSkgIHsKICAgICAgICAgICAgICAgIGxldCBiYXNlRmVlID0gdGhpcy5sb3R0ZXJ5Um91bmQubG90dGVyeS5iYXNlRmVlOwogICAgICAgICAgICAgICAgbGV0IHRvdGFsRmVlID0gMTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yICAobGV0IFtpdGVtSWQsIG51bV0gb2Ygb3B0aW9uU2VsZWN0ZWROdW1CeUl0ZW1JZCkgewogICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5pdGVtQnlJdGVtSWQuZ2V0KGl0ZW1JZCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbk9wdGlvbk51bSA9IGl0ZW0ubWluT3B0aW9uTnVtOwogICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb25TZWxlY3RlZE51bSA9IG51bTsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uU2VsZWN0ZWROdW0gPCBtaW5PcHRpb25OdW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGZWUgPSAwOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50IGNvbWJpbmF0aW9uLCBsaWtlIEMoNyw2KQogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZlZSA9IHRvdGFsRmVlICogKHRoaXMuZmFjdG9yaWFsKG9wdGlvblNlbGVjdGVkTnVtLCAob3B0aW9uU2VsZWN0ZWROdW0gLSBtaW5PcHRpb25OdW0gKyAxKSkvdGhpcy5mYWN0b3JpYWwobWluT3B0aW9uTnVtLDEpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgdGhpcy5mZWUgPSB0b3RhbEZlZSAqIGJhc2VGZWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgdGhpcy5mZWUgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub3B0aW9uc1NlbGVjdGVkID0gb3B0aW9uc1NlbGVjdGVkVGVtcDsKICAgICAgICB9LAogICAgICAgIGZhY3RvcmlhbDogZnVuY3Rpb24obWF4LCBtaW4pIHsKICAgICAgICAgICAgaWYgKG1pbiA+IG1heCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG1heDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1pbjsgaTwgbWF4OyBpKyspewogICAgICAgICAgICAgICAgcmVzdWx0ID0gaSAqIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0sCiAgICAgICAgc3VibWl0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgbGV0IGN1c0lkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShnbG9iYWwuQ1VTVE9NRVJfSURfS0VZKTsKICAgICAgICAgICAgbGV0IHRvdGFsRmVlID0gdGhpcy5mZWUgKiB0aGlzLnRpbWVzOwogICAgICAgICAgICBpZiAodG90YWxGZWUgPiB0aGlzLmN1c3RvbWVyLmRlcG9zaXQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIuS9memineS4jei2syIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0b3RhbEZlZSA+IGdsb2JhbC5GRUVfTUFYKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCLotoXov4fmnIDlpKfmipXms6jpop0iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICJjdXN0b21lciI6IHsiaWQiOiBjdXNJZH0sCiAgICAgICAgICAgICAgICAibG90dGVyeVJvdW5kIjogeyJpZCI6IHRoaXMubG90dGVyeVJvdW5kLmlkfSwKICAgICAgICAgICAgICAgICJ0aW1lcyI6IHRoaXMudGltZXMsCiAgICAgICAgICAgICAgICAib3B0aW9ucyI6IHRoaXMub3B0aW9uc1NlbGVjdGVkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS92MS9jdXN0b21lcnMvJyArIGN1c0lkICsnL2JpZHMnLCBkYXRhLCB7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9fSkKICAgICAgICAgICAgICAgIC50aGVuKAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgi5oqV5rOo5oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXIuZGVwb3NpdCA9IHRoaXMuY3VzdG9tZXIuZGVwb3NpdCAtIHJlc3BvbnNlLmRhdGEuZmVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIGxldCBjdXNJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZ2xvYmFsLkNVU1RPTUVSX0lEX0tFWSk7CiAgICAgICAgbGV0IGxvdHRlcnlJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmxvdHRlcnlJZDsKICAgICAgICBheGlvcwogICAgICAgICAgICAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3YxL2N1c3RvbWVycy8nICsgY3VzSWQpCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+ICh0aGlzLmN1c3RvbWVyID0gcmVzcG9uc2UuZGF0YSkpCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvdjEvbG90dGVyaWVzLycgKyBsb3R0ZXJ5SWQgKyAnL3JvdW5kcz9zdGF0dXM9YWN0aXZlJykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvbnRlbnQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvdHRlcnlSb3VuZCA9IHJlc3BvbnNlLmRhdGEuY29udGVudFswXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7IAogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICBheGlvcwogICAgICAgICAgICAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3YxL2xvdHRlcmllcy8nICsgbG90dGVyeUlkICsgJy9vcHRpb25zJykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uc0J5aXRlbSA9IFtdOwogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zQnlJdGVtSWQgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSArKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9uc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBvcHRpb24uaXRlbTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNCeUl0ZW1JZC5oYXMoaXRlbS5pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNCeUl0ZW1JZC5nZXQoaXRlbS5pZCkucHVzaChvcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0J5aXRlbSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0J5aXRlbS5wdXNoKG9wdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQnlJdGVtSWQuc2V0KGl0ZW0uaWQsIG9wdGlvbnNCeWl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbUJ5SXRlbUlkLnNldChpdGVtLmlkLCBpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNCeUl0ZW1JZCA9IG9wdGlvbnNCeUl0ZW1JZDsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgfQp9Cg=="},{"version":3,"sources":["Lottery.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Lottery.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div>\n            <div>账户余额：{{ customer.deposit }}</div>\n        </div>\n        <div>\n            <div style=\"line-height: 36px;\">\n                <div >\n                    彩票名称：{{ lotteryRound.lottery.name }}\n                </div>\n                <div>\n                    开奖日期：{{ lotteryRound.openingTime }}\n                </div>\n                <div style=\"overflow:hidden\" v-for=\"(optionsItemId, itemIndex) in optionsByItemId.entries()\" v-bind:key=\"itemIndex\">\n                    <div></div>\n                    <div style=\"float:left;\">\n                        {{ itemByItemId.get(optionsItemId[0]).name }}：\n                    </div>\n                    <div style=\"float:left;margin:2px;\" v-for=\"(option, optionIndex) of optionsItemId[1]\" v-bind:key=\"optionIndex\">\n                        <el-button v-on:click=\"selectOption(option)\" v-bind:class=\"optionsSelected.includes(option)?'select': 'unselect' \" size=\"small\" circle>\n                            <div style=\"width: 16px;\">\n                            {{ option.text }}\n                            </div>\n                        </el-button>\n                    </div>\n                </div>\n                <div style=\"overflow:hidden\">\n                    <div style=\"float:left;\">\n                            投注倍数：\n                    </div>\n                    <div  style=\"float:left;\">\n                        <el-input maxlength=\"5\" v-model=\"times\" placeholder=\"倍数\" size=\"small\" min=\"1\"></el-input>\n                    </div>\n                </div>\n                <div style=\"overflow:hidden\">\n                    <div style=\"float:left;\">\n                            单注费用：\n                    </div>\n                    <div style=\"float:left;\">\n                            {{ fee }}\n                    </div>\n                </div>\n                <div>\n                    <div>\n                        <el-button v-on:click=\"submit()\" size=\"small\" v-bind:disabled=\"fee == 0\">\n                            确定\n                        </el-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n    data () {\n        return {\n            fee: 0,\n            current: null,\n            times: 1,\n            customer: { \"id\": \"\", \"deposit\": 0 },\n            lotteryRound: {\"lottery\": {\"name\":\"\"}},\n            optionsByItemId: new Map(),\n            itemByItemId: new Map(),\n            optionsSelected: []\n        }\n    },\n    methods: {\n        selectOption: function (optionSelected) {\n            let optionsSelectedTemp = [...this.optionsSelected]\n            var position = optionsSelectedTemp.indexOf(optionSelected);\n            if (position < 0) {\n                optionsSelectedTemp.push(optionSelected);\n            } else {\n                optionsSelectedTemp.splice(position, 1);\n            }\n            // count options selected by item\n            var optionSelectedNumByItemId = new Map();\n            for (var i = 0; i < optionsSelectedTemp.length; i++) {\n                var option = optionsSelectedTemp[i];\n                var itemId = option.item.id;\n                if ( optionSelectedNumByItemId.has(itemId)) {\n                    optionSelectedNumByItemId.set(itemId, optionSelectedNumByItemId.get(itemId) + 1);\n                } else {\n                    optionSelectedNumByItemId.set(itemId, 1 );\n                }\n            }\n\n            console.log(\"###1 \" + optionSelectedNumByItemId.size)\n            console.log(\"###2 \" + JSON.stringify(this.lotteryRound.lottery))\n            // count fee\n            if (optionSelectedNumByItemId.size >= this.lotteryRound.lottery.minItemNum)  {\n                let baseFee = this.lotteryRound.lottery.baseFee;\n                let totalFee = 1;\n                \n                for  (let [itemId, num] of optionSelectedNumByItemId) {\n                    let item = this.itemByItemId.get(itemId);\n                    let minOptionNum = item.minOptionNum;\n                    let optionSelectedNum = num;\n                    if (optionSelectedNum < minOptionNum) {\n                        totalFee = 0;\n                    } else {\n                        // count combination, like C(7,6)\n                        totalFee = totalFee * (this.factorial(optionSelectedNum, (optionSelectedNum - minOptionNum + 1))/this.factorial(minOptionNum,1));\n                    }\n                } \n                this.fee = totalFee * baseFee;\n            } else {\n                 this.fee = 0;\n            }\n            this.optionsSelected = optionsSelectedTemp;\n        },\n        factorial: function(max, min) {\n            if (min > max) {\n                return 0;\n            }\n            let result = max;\n            for (let i = min; i< max; i++){\n                result = i * result;\n            }\n            return result;\n        },\n        submit: function() {\n            let cusId = sessionStorage.getItem(global.CUSTOMER_ID_KEY);\n            let totalFee = this.fee * this.times;\n            if (totalFee > this.customer.deposit) {\n                this.$message(\"余额不足\");\n                return;\n            }\n            if (totalFee > global.FEE_MAX) {\n                this.$message(\"超过最大投注额\");\n                return;\n            }\n            let data = {\n                \"customer\": {\"id\": cusId},\n                \"lotteryRound\": {\"id\": this.lotteryRound.id},\n                \"times\": this.times,\n                \"options\": this.optionsSelected\n            };\n            axios\n                .post('http://localhost:8080/api/v1/customers/' + cusId +'/bids', data, {headers: {'Content-Type': 'application/json'}})\n                .then(\n                    response => {\n                        this.$message(\"投注成功\");\n                        this.customer.deposit = this.customer.deposit - response.data.fee;\n                    }\n                )\n                .catch(function (error) { \n                    console.log(error);\n                });\n        }\n    },\n    mounted () {\n        let cusId = sessionStorage.getItem(global.CUSTOMER_ID_KEY);\n        let lotteryId = this.$route.query.lotteryId;\n        axios\n            .get('http://localhost:8080/api/v1/customers/' + cusId)\n            .then(response => (this.customer = response.data))\n            .catch(function (error) { \n                console.log(error);\n            });\n        axios\n            .get('http://localhost:8080/api/v1/lotteries/' + lotteryId + '/rounds?status=active')\n            .then(response => {\n                    if (response.data.content.length > 0) {\n                        this.lotteryRound = response.data.content[0];\n                    }\n                })\n            .catch(function (error) { \n                console.log(error);\n            });\n        axios\n            .get('http://localhost:8080/api/v1/lotteries/' + lotteryId + '/options')\n            .then(response => {\n                    var options = response.data;\n                    var optionsByitem = [];\n                    var optionsByItemId = new Map();\n                    for (var i = 0; i < options.length; i ++) {\n                        var option = options[i];\n                        var item = option.item;\n                        if (optionsByItemId.has(item.id)) {\n                            optionsByItemId.get(item.id).push(option);\n                        } else {\n                            optionsByitem = [];\n                            optionsByitem.push(option);\n                            optionsByItemId.set(item.id, optionsByitem);\n\n                            this.itemByItemId.set(item.id, item);\n                        }\n                    }\n                    this.optionsByItemId = optionsByItemId;\n                })\n            .catch(function (error) { \n                console.log(error);\n            });\n    }\n}\n</script>\n\n<style>\n.select{\n    background-color: red !important;\n    color:white !important;\n}\n.select:hover{\n    background-color: red !important;\n    color:white !important;\n}\n.select:focus{\n    background-color: red !important;\n    color:white !important;\n}\n.unselect{\n    background-color: white !important;\n    border-color: #DCDFE6 !important;\n}\n.unselect:hover{\n    background-color: white !important;\n    border-color: #DCDFE6 !important;\n    color:black !important;\n}\n.unselect:focus{\n    background-color: white !important;\n    border-color: #DCDFE6 !important;\n    color:black !important;\n}\n</style>"]}]}