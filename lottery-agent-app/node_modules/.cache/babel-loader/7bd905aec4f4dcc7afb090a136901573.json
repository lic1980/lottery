{"remainingRequest":"C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\babel-loader\\lib\\index.js!C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\workspace\\lottery\\lottery-agent-app\\src\\components\\CustomersAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\workspace\\lottery\\lottery-agent-app\\src\\components\\CustomersAdmin.vue","mtime":1605619368927},{"path":"C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\lottery\\lottery-agent-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L3dvcmtzcGFjZS9sb3R0ZXJ5L2xvdHRlcnktYWdlbnQtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbW91bnQ6IDAsCiAgICAgIGFnZW50OiB7fSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGN1c3RvbWVyOiB7fSwKICAgICAgY3VzdG9tZXJzOiBbXSwKICAgICAgc3RhcnREZXBvc2l0OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jdXN0b21lciA9IHt9OwogICAgICB0aGlzLmFtb3VudCA9IDE7CiAgICB9LAogICAgb3BlbkRlcG9zaXREaWFnOiBmdW5jdGlvbiBvcGVuRGVwb3NpdERpYWcocm93KSB7CiAgICAgIHRoaXMuYW1vdW50ID0gMTsKICAgICAgdGhpcy5jdXN0b21lciA9IHJvdzsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBzdWJtaXREZXBvc2l0OiBmdW5jdGlvbiBzdWJtaXREZXBvc2l0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5zdGFydERlcG9zaXQgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAiY3VzdG9tZXIiOiB7CiAgICAgICAgICAiaWQiOiB0aGlzLmN1c3RvbWVyLmlkCiAgICAgICAgfSwKICAgICAgICAiYWdlbnQiOiB7CiAgICAgICAgICAiaWQiOiB0aGlzLmFnZW50LmlkCiAgICAgICAgfSwKICAgICAgICAiYW1vdW50IjogdGhpcy5hbW91bnQKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS92MS9hZ2VudHMvJyArIHRoaXMuYWdlbnQuaWQgKyAnY3VzdG9tZXJzLycgKyB0aGlzLmFnZW50LmlkICsgJy9kZXBvc2l0cycsIGRhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkZXBvc2l0ID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF90aGlzLmN1c3RvbWVycyksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGN1cyA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgaWYgKGN1cy5pZCA9PSBfdGhpcy5jdXN0b21lci5pZCkgewogICAgICAgICAgICAgIGN1cy5kZXBvc2l0ID0gY3VzLmRlcG9zaXQgKyBkZXBvc2l0LmFtb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CgogICAgICAgIF90aGlzLnN0YXJ0RGVwb3NpdCA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgX3RoaXMuc3RhcnREZXBvc2l0ID0gZmFsc2U7CiAgICAgIH0pOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgYWdlbnRJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZ2xvYmFsLkFHRU5UX0lEX0tFWSk7CiAgICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvdjEvYWdlbnRzLycgKyBhZ2VudElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gX3RoaXMyLmFnZW50ID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICB9KTsKICAgIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS92MS9hZ2VudHMvJyArIGFnZW50SWQgKyAnL2N1c3RvbWVycz9wYWdlPTEmc2l6ZT0xMCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzMi5jdXN0b21lcnMgPSByZXNwb25zZS5kYXRhLmNvbnRlbnQ7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["CustomersAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,CADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,CAAA;AACA,KALA;AAMA,IAAA,eANA,2BAMA,GANA,EAMA;AACA,WAAA,MAAA,GAAA,CAAA;AACA,WAAA,QAAA,GAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KAVA;AAWA,IAAA,aAXA,2BAWA;AAAA;;AACA,WAAA,YAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA;AACA,oBAAA;AAAA,gBAAA,KAAA,QAAA,CAAA;AAAA,SADA;AAEA,iBAAA;AAAA,gBAAA,KAAA,KAAA,CAAA;AAAA,SAFA;AAGA,kBAAA,KAAA;AAHA,OAAA;AAKA,MAAA,KAAA,CACA,IADA,CACA,yCAAA,KAAA,KAAA,CAAA,EAAA,GAAA,YAAA,GAAA,KAAA,KAAA,CAAA,EAAA,GAAA,WADA,EACA,IADA,EACA;AAAA,QAAA,OAAA,EAAA;AAAA,0BAAA;AAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,YAAA,OAAA,GAAA,QAAA,CAAA,IAAA;;AADA,mDAEA,KAAA,CAAA,SAFA;AAAA;;AAAA;AAEA,8DAAA;AAAA,gBAAA,GAAA;;AACA,gBAAA,GAAA,CAAA,EAAA,IAAA,KAAA,CAAA,QAAA,CAAA,EAAA,EAAA;AACA,cAAA,GAAA,CAAA,OAAA,GAAA,GAAA,CAAA,OAAA,GAAA,OAAA,CAAA,MAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;;AAQA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,OAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,OAfA;AAgBA,WAAA,aAAA,GAAA,KAAA;AACA;AAnCA,GAXA;AAgDA,EAAA,OAhDA,qBAgDA;AAAA;;AACA,QAAA,OAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AACA,IAAA,KAAA,CACA,GADA,CACA,yCAAA,OADA,EAEA,IAFA,CAEA,UAAA,QAAA;AAAA,aAAA,MAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA;AAAA,KAFA,EAGA,KAHA,CAGA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KALA;AAMA,IAAA,KAAA,CACA,GADA,CACA,yCAAA,OAAA,GAAA,2BADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,KAJA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KAPA;AAQA;AAhEA,CAAA","sourcesContent":["<template>\n    <div>\n        <div>\n            <div></div>\n        </div>\n        <div>\n            <div>客户列表：</div> \n            <div>\n                <el-table :data=\"customers\" style=\"width: 100%\">\n                    <el-table-column prop=\"tel\" label=\"客户电话\">\n                    </el-table-column>   \n                    <el-table-column prop=\"deposit\" label=\"余额\">\n                    </el-table-column>   \n                    <el-table-column label=\"操作\">\n                        <template slot-scope=\"scope\">\n                            <el-button\n                            size=\"mini\"\n                            @click=\"openDepositDiag(scope.row)\">充值</el-button>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </div>\n        </div>\n        <el-dialog\n            title=\"充值\"\n            :visible.sync=\"dialogVisible\"\n            width=\"350px\"\n            :before-close=\"handleClose\">\n            <div>\n                <el-form>\n                 <el-form-item label=\"客户电话：\" label-width=\"100px\">\n                    <el-input v-model=\"customer.tel\" size=\"small\" :disabled=\"true\"></el-input>\n                 </el-form-item>\n                </el-form>\n            </div>\n            <div>\n                <el-form>\n                 <el-form-item label=\"客户现值：\" label-width=\"100px\">\n                    <el-input v-model=\"customer.deposit\" size=\"small\" :disabled=\"true\"></el-input>\n                 </el-form-item>\n                </el-form>\n            </div>\n            <div>\n                <el-form>\n                 <el-form-item label=\"客户充值：\" label-width=\"100px\">\n                    <el-input-number v-model=\"amount\" size=\"small\" :precision=\"2\" :step=\"1\" :max=\"1000\"></el-input-number>\n                 </el-form-item>\n                </el-form>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitDeposit()\" :disabled=\"startDeposit\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    data () {\n        return {\n            amount: 0,\n            agent: {},\n            dialogVisible: false,\n            customer: {},\n            customers: [],\n            startDeposit: false,\n        };\n    },\n    methods: {\n        handleClose(){\n            this.dialogVisible = true;\n            this.customer = {};\n            this.amount = 1;\n        },\n        openDepositDiag(row) {\n            this.amount = 1;\n            this.customer = row;\n            this.dialogVisible = true;\n        },\n        submitDeposit() {\n            this.startDeposit = true;\n            let data = {\n                \"customer\": {\"id\": this.customer.id},\n                \"agent\": {\"id\": this.agent.id},\n                \"amount\": this.amount\n            };\n            axios\n                .post('http://localhost:8080/api/v1/agents/'+this.agent.id+'customers/' +this.agent.id+ '/deposits', data, {headers: {'Content-Type': 'application/json'}})\n                .then(response => {\n                    let deposit = response.data;\n                    for (let cus of this.customers) {\n                        if (cus.id == this.customer.id) {\n                           cus.deposit =  cus.deposit + deposit.amount;\n                        } \n                    }\n\n                    this.startDeposit = false;\n                })\n                .catch(error => { \n                    console.log(error);\n                    this.startDeposit = false;\n                });\n            this.dialogVisible = false;\n        }\n    },\n    mounted () {\n        let agentId = sessionStorage.getItem(global.AGENT_ID_KEY);\n        axios\n            .get('http://localhost:8080/api/v1/agents/' + agentId)\n            .then(response => (this.agent = response.data))\n            .catch(function (error) { \n                console.log(error);\n            });\n        axios\n            .get('http://localhost:8080/api/v1/agents/'+ agentId + '/customers?page=1&size=10')\n            .then(response => {\n                    this.customers = response.data.content;\n                })\n            .catch(function (error) { \n                console.log(error);\n            });\n    }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/components"}]}